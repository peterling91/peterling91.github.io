window.addEventListener("load",()=>{const t=document.querySelector(".click-me"),o=document.querySelector(".wiper"),d=document.querySelector(".close-confetti-overlay"),T=new Audio("../dist/confetti/Hand_slide_in.mp3"),c=new Audio("../dist/confetti/Sticker_stamp.mp3"),M=document.querySelector(".stamper-container"),m=document.querySelector(".stamper-marks-container");if(t&&d&&o&&M&&m){let l=!1,a=!0,e;var n=()=>{e=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight),m.style.height=e+"px",M.style.height=e+"px"};n(),window.addEventListener("resize",n);let w=!1,r=!1;t&&t.addEventListener("click",function(){t.style.opacity="0",setTimeout(()=>{t.style.display="none"},600),d.style.display="flex",d.classList.add("animate-sliding-up"),M.style.display="block",m.style.display="block",m.innerHTML="",t.style.display="none",a=!0,s(),(w=!0)&&(T.currentTime=0,T.volume=.5,T.play().catch(e=>console.error("Error playing audio:",e))),setTimeout(()=>{(r=!0)&&(c.currentTime=0,c.volume=.5,c.play().catch(e=>console.error("Error playing audio:",e)))},1200)}),d.addEventListener("click",function(){d.classList.add("animate-sliding-down"),setTimeout(()=>{d.classList.remove("animate-sliding-down")},1200),M.style.display="none",o.style.display="block",isStamperActive=!1,a=!1,setTimeout(function(){d.style.display="none",t.style.display="block",t.style.opacity="0",setTimeout(()=>{t.style.opacity="1"},1),s()},1200),setTimeout(function(){o.style.display="none",m.style.display="none",m.innerHTML=""},1200),w=!1,T.pause(),T.currentTime=0,T.volume=.5,r=!1,c.pause(),c.currentTime=0},!0),d.addEventListener("click",function(){var e=[].slice.call(document.querySelectorAll(".stamper-marks-container .image-stamps"));e.sort((e,t)=>parseInt(e.style.top,10)-parseInt(t.style.top,10));let o=0;e.forEach(e=>{var t=e.getBoundingClientRect().top;t>=-e.offsetHeight&&t<=window.innerHeight?(o+=1,setTimeout(()=>{e.style.opacity="0"},100*o)):e.style.opacity="0",setTimeout(()=>{e.remove()},1200)})});let v,L,b=["Top","Bottom","Left","Right"];p(),f(),window.onresize=p,window.onresize=f;var n=document.querySelector(".wiper"),i=document.querySelectorAll(".image-stamp");if(n){const y=document.createElement("div");n.appendChild(y),i.forEach(e=>{var t,o;t=y,o=e,t=t.getBoundingClientRect(),o=o.getBoundingClientRect(),t.top>o.bottom||t.right<o.left||t.bottom<o.top||t.left>o.right||(e.style.display="none")}),n.removeChild(y)}function s(){document.removeEventListener("click",h),document.removeEventListener("click",g),document.addEventListener("click",h),document.addEventListener("click",g)}function p(){v=window.innerWidth/2}function f(){L=window.innerHeight/2}function h(t){if(t.target!==d){var o=t.clientX,n=t.clientY;b=o<v?b.filter(e=>"Right"!==e):b.filter(e=>"Left"!==e);const p=[...b=n<L?b.filter(e=>"Bottom"!==e):b.filter(e=>"Top"!==e)];window.innerWidth<768&&(b=(b=b.filter(e=>"Right"!==e)).filter(e=>"Left"!==e)),window.addEventListener("resize",()=>{b=window.innerWidth<768?(b=b.filter(e=>"Right"!==e)).filter(e=>"Left"!==e):[...p]});var i=["arm-top-1v2.png","arm-top-2v2.png","arm-top-3v2.png","arm-top-4v2.png","arm-top-5v2.png"],s=["arm-bottom-1v2.png","arm-bottom-2v2.png","arm-bottom-3v2.png","arm-bottom-4v2.png","arm-bottom-5v2.png"],c=["arm-left-1v2.png","arm-left-2v2.png","arm-left-3v2.png","arm-left-4v2.png","arm-left-5v2.png"],m=["arm-right-1v2.png","arm-right-2v2.png","arm-right-3v2.png","arm-right-4v2.png","arm-right-5v2.png"];const f=b[Math.floor(Math.random()*b.length)];let e;switch(f){case"Top":e=i[Math.floor(Math.random()*i.length)];break;case"Bottom":e=s[Math.floor(Math.random()*s.length)];break;case"Left":e=c[Math.floor(Math.random()*c.length)];break;case"Right":e=m[Math.floor(Math.random()*m.length)]}const{clientX:h,clientY:g}=t,y=document.createElement("img"),u=(y.src="../dist/confetti/"+e,y.classList.add("stampers"),y.classList.add(f.toLowerCase()+"-arm"),document.createElement("img"));u.src="../dist/confetti/"+{Top:"shadow-top.png",Bottom:"shadow-bottom.png",Left:"shadow-left.png",Right:"shadow-right.png"}[f],u.classList.add("shadow","shadow-"+f.toLowerCase()),document.body.appendChild(u);let l,a,r,d;y.onload=function(){var e=y.offsetWidth,t=y.offsetHeight;switch(f){case"Top":l=h-e/2,a=window.scrollY-t,r=l,d=g+window.scrollY+e/1.3-t,shadowOffsetX=5,shadowOffsetY=5;break;case"Bottom":l=h-e/2,a=window.innerHeight+window.scrollY,r=l,d=g+window.scrollY-e/1.5,shadowOffsetX=5,shadowOffsetY=-5;break;case"Left":l=-e,a=g+window.scrollY-t/2.5,r=h-e/1.5-t,d=a,shadowOffsetX=5,shadowOffsetY=5;break;case"Right":l=window.innerWidth,a=g+window.scrollY-t/2.5,r=h-t,d=a,shadowOffsetX=-5,shadowOffsetY=5}y.style.left=l+"px",y.style.top=a+"px",y.style.visibility="visible",M.appendChild(y);const o=l+shadowOffsetX,n=a+shadowOffsetY,i=r+shadowOffsetX,s=d+shadowOffsetY;u.style.left=o+"px",u.style.top=n+"px",u.style.visibility="visible",M.appendChild(u),setTimeout(()=>{y.style.transition="all 1s ease",y.style.left=r+"px",y.style.top=d+"px",u.style.transition="all 1s ease",u.style.left=i+"px",u.style.top=s+"px"},100),setTimeout(()=>{y.style.left=l+"px",y.style.top=a+"px",u.style.left=o+"px",u.style.top=n+"px"},1150),setTimeout(()=>{y.remove(),u.remove()},2e3)},document.body.appendChild(y),y.style.visibility="hidden",document.body.appendChild(u),u.style.visibility="hidden",b=["Top","Bottom","Left","Right"],w&&(T.currentTime=0,T.volume=.5,T.play().catch(e=>console.error("Error playing audio:",e)))}}function g(e){if(e.target!==d&&a){const s=["FMO-Line-Game-on.png","FMO-Line-Knowledge-is-power.png","FMO-Line-Peace.png","FMO-Line-Welcome-freshie.png","FMO-Non-Line-I-love-school.png","FMO-Non-Line-Lets-have-fun.png","FMO-Non-Line-Smiley.png","FMO-Non-Line-Time-for-you-to-shine.png"];var t,o,n,i;l||e.target!==d&&(l=!0,setTimeout(()=>{l=!1},100),{clientX:e,clientY:t}=e,e=e,t=t,o=(o=[...s])[Math.floor(Math.random()*o.length)],n=[0,30,330][Math.floor(3*Math.random())],(i=document.createElement("img")).classList.add("image-stamps"),i.src="../dist/confetti/"+o,i.style.transform=`rotate(${n}deg)`,o=e+window.scrollX,n=t+window.scrollY,i.style.left=o-40+"px",i.style.top=n-40+"px",m.appendChild(i),setTimeout(()=>{r&&(c.currentTime=0,c.play().catch(e=>console.error("Error playing audio:",e)))},1100))}}}});